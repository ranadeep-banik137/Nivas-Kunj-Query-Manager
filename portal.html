<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nivas Kunj | Admin Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
	<script src="new-obs-conf.js"></script>
	<script src="new-obs-portal.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@700;800&family=Inter:wght@400;500;600;700&display=swap');
        
        body { 
			font-family: 'Inter', sans-serif; 
			/* Deep Slate to Navy Mesh Gradient */
			background: radial-gradient(at 0% 0%, rgba(15, 23, 42, 1) 0, transparent 50%), 
						radial-gradient(at 100% 0%, rgba(30, 41, 59, 1) 0, transparent 50%), 
						radial-gradient(at 100% 100%, rgba(79, 70, 229, 0.1) 0, transparent 50%),
						radial-gradient(at 0% 100%, rgba(15, 23, 42, 1) 0, transparent 50%);
			background-color: #020617;
			background-attachment: fixed;
			color: #f8fafc;
			margin: 0;
		}

        /* Luxury Glass Panels */
        .glass-panel {
			background: rgba(30, 41, 59, 0.4); /* Darker transparency */
			backdrop-filter: blur(16px) saturate(180%);
			-webkit-backdrop-filter: blur(16px) saturate(180%);
			border: 1px solid rgba(255, 255, 255, 0.08);
			box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
		}

		.nav-blur {
			background: rgba(15, 23, 42, 0.8);
			backdrop-filter: blur(20px);
			border-bottom: 1px solid rgba(255, 255, 255, 0.05);
		}

        /* Active Tab Styling */
        .active-tab {
			background: rgba(79, 70, 229, 0.2) !important;
			color: #818cf8 !important; /* Lighter indigo for dark mode */
			border: 1px solid rgba(129, 140, 248, 0.3);
		}

        .btn-luxury {
			background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
			box-shadow: 0 0 20px rgba(79, 70, 229, 0.4);
			border: none;
		}

		.btn-luxury:hover {
			box-shadow: 0 0 30px rgba(124, 58, 237, 0.6);
			transform: translateY(-2px) scale(1.02);
		}

        .hidden { display: none !important; }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up { animation: slideUp 0.5s ease-out forwards; }

        /* Modern Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
		/* Modern scrollbar for the Discussion Modal */
		.custom-scrollbar::-webkit-scrollbar {
			width: 4px;
		}
		.custom-scrollbar::-webkit-scrollbar-track {
			background: rgba(255, 255, 255, 0.02);
			border-radius: 10px;
		}
		.custom-scrollbar::-webkit-scrollbar-thumb {
			background: rgba(99, 102, 241, 0.2);
			border-radius: 10px;
		}
		.custom-scrollbar::-webkit-scrollbar-thumb:hover {
			background: rgba(99, 102, 241, 0.5);
		}
		/* Chat Bubble Styling */
		.custom-scrollbar {
			scroll-behavior: smooth;
		}

		/* Add a slight entrance animation to bubbles */
		.flex.justify-start, .flex.justify-end {
			animation: bubbleFadeIn 0.3s ease-out forwards;
		}

		@keyframes bubbleFadeIn {
			from { opacity: 0; transform: translateY(10px); }
			to { opacity: 1; transform: translateY(0); }
		}
		.toast-visible {
			transform: translate(-50%, -20px) !important;
			opacity: 1 !important;
		}
		@media screen { #printable-area { display: none; } }
		@media print { 
			body * { visibility: hidden; } 
			#printable-area, #printable-area * { visibility: visible; }
			#printable-area { position: absolute; left: 0; top: 0; width: 100%; }
		}
    </style>
</head>
<body>
	<div id="printable-area"></div>
    <div id="loader" class="fixed inset-0 bg-white z-[300] flex flex-col items-center justify-center">
        <div class="w-12 h-12 border-4 border-zinc-200 border-t-indigo-600 rounded-full animate-spin mb-4"></div>
        <p class="text-zinc-500 font-bold text-[10px] uppercase tracking-[0.3em]">Authenticating</p>
    </div>

    <div id="admin-view" class="hidden min-h-screen">
        <nav class="h-20 nav-blur px-8 lg:px-12 flex items-center justify-between sticky top-0 z-50">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20">
                    <img src="https://github.com/ranadeep-banik137/NivasKunjInteriors/blob/main/logo%20transparent%20PNG.png?raw=true" class="h-6 w-auto" alt="Logo">
                </div>
                <div>
                    <h1 class="font-bold text-sm tracking-tighter text-white uppercase leading-none">Nivas Kunj</h1>
                    <p class="text-[8px] font-black text-indigo-600 uppercase tracking-widest mt-1">Luxury Interiors</p>
                </div>
            </div>

            <div class="flex items-center bg-white/5 p-1.5 rounded-2xl border border-white/10 backdrop-blur-md">
                <button onclick="switchTab('enquiries')" id="tab-enquiries" 
                    class="px-6 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2 active-tab">
                    <i data-lucide="users" class="w-3.5 h-3.5"></i> Enquiries
                </button>
                <button onclick="switchTab('quotes')" id="tab-quotes" 
                    class="px-6 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2">
                    <i data-lucide="file-text" class="w-3.5 h-3.5"></i> Quotes
                </button>
				<button onclick="switchTab('projects')" id="tab-projects" 
					class="px-6 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2">
					<i data-lucide="layout-dashboard" class="w-3.5 h-3.5"></i> Projects
				</button>
				<button onclick="switchTab('users')" id="tab-users" class="hidden px-6 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2">
					<i data-lucide="shield-check" class="w-3.5 h-3.5"></i> Users
				</button>
            </div>

            <div class="flex items-center gap-3">
                <div class="flex items-center gap-3 px-4 py-2 bg-slate-900/50 border border-white/10 rounded-2xl shadow-sm">
                    <div class="w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400">
                        <i data-lucide="user-check" class="w-4 h-4"></i>
                    </div>
                    <div class="flex flex-col items-start">
                        <span class="text-[8px] font-black text-slate-500 uppercase tracking-tighter leading-none">Access Level</span>
                        <span id="user-role" class="text-[10px] font-bold text-indigo-400 uppercase">Administrator</span>
                    </div>
                </div>
                <button onclick="handleLogout()" class="w-11 h-11 flex items-center justify-center rounded-2xl bg-slate-900 text-white hover:bg-red-600 transition-all shadow-lg active:scale-95">
                    <i data-lucide="log-out" class="w-5 h-5"></i>
                </button>
            </div>
        </nav>
		
		<main class="max-w-7xl mx-auto px-8 lg:px-12 py-12">
			<header class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
				<div>
					<h2 id="tab-title" class="text-3xl font-black text-white tracking-tighter uppercase">Enquiry Pipeline</h2>
					<p class="text-slate-400 text-xs font-medium mt-1">Manage and track high-intent workspace enquiries.</p>
				</div>
				
				<div class="flex flex-wrap items-center gap-3">
					<div class="relative">
						<i data-lucide="search" class="w-4 h-4 absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
						<input type="text" id="leadSearch" oninput="handleSearch()" placeholder="Search client or email..." 
							class="bg-white/5 border border-white/10 rounded-2xl py-3 pl-11 pr-4 text-xs font-bold text-white outline-none focus:ring-2 focus:ring-indigo-500 w-64 transition-all">
					</div>

					<select id="sortOrder" onchange="handleSort()" class="bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-[10px] font-black uppercase text-slate-400 outline-none cursor-pointer">
						<option value="newest">Newest First</option>
						<option value="oldest">Oldest First</option>
						<option value="name">Name A-Z</option>
					</select>

					<button onclick="fetchAdminData()" class="w-11 h-11 flex items-center justify-center bg-white/5 border border-white/10 rounded-2xl text-white hover:bg-indigo-600 transition shadow-sm">
						<i data-lucide="refresh-cw" class="w-4 h-4"></i>
					</button>
				</div>
			</header>

			<div id="main-pipeline-header" class="grid grid-cols-12 px-8 mb-6 text-[9px] font-black uppercase text-slate-400 tracking-[0.2em]">
				<div class="col-span-4">Customer Identity</div>
				<div class="col-span-3">Pipeline Status</div>
				<div class="col-span-2">Verification</div>
				<div class="col-span-3 text-right">Action</div>
			</div>

			<div id="pagination-controls" class="mt-8 flex justify-center items-center gap-4">
				</div>
			<div id="enquiries-view" class="tab-content">
				<div id="admin-content" class="space-y-4"></div>
			</div>
			<div id="projects-view" class="tab-content hidden">
				<div class="flex justify-between items-center mb-8 bg-white/5 p-6 rounded-[32px] border border-white/10 backdrop-blur-md">
					<div>
						<h2 class="text-2xl font-black text-white uppercase tracking-tighter">Project Portfolio</h2>
						<p class="text-slate-400 text-[10px] font-bold uppercase tracking-[0.2em] mt-1">Live Architectural & Interior Workspaces</p>
					</div>
					<div id="admin-project-actions" class="hidden">
						<button onclick="openManualProjectModal()" class="group flex items-center gap-3 bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-2xl transition-all shadow-lg shadow-indigo-500/20 active:scale-95">
							<i data-lucide="plus-circle" class="w-5 h-5 group-hover:rotate-90 transition-transform"></i>
							<span class="text-[10px] font-black uppercase tracking-widest">Manual Project</span>
						</button>
					</div>
				</div>
				
				<div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
					</div>
			</div>
			<div id="users-view" class="hidden animate-slide-up">
				<div class="glass-panel rounded-[40px] overflow-hidden border border-white/10">
					<table class="w-full text-left">
						<thead class="bg-white/5 border-b border-white/10">
							<tr>
								<th class="px-8 py-5 text-[9px] font-black text-slate-500 uppercase tracking-widest">Identify</th>
								<th class="px-8 py-5 text-[9px] font-black text-slate-500 uppercase tracking-widest">Access Level</th>
								<th class="px-8 py-5 text-[9px] font-black text-slate-500 uppercase tracking-widest text-right">Management</th>
							</tr>
						</thead>
						<tbody id="users-table-body">
							</tbody>
					</table>
				</div>
			</div>
		</main>
	</div>

    <div id="lead-modal" class="fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[400] hidden flex items-center justify-center p-4">
        <div class="bg-slate-950 w-full max-w-4xl max-h-[92vh] rounded-[40px] shadow-2xl border border-white/10 flex flex-col overflow-hidden animate-slide-up">
            <div class="bg-slate-950 w-full max-w-5xl max-h-[95vh] rounded-[32px] shadow-2xl border border-white/10 flex flex-col overflow-hidden animate-slide-up">
				<div class="p-6 border-b border-white/10 flex justify-between items-center bg-slate-900">
					<div>
						<h3 id="modal-title" class="text-xl font-black text-white tracking-tighter uppercase">Lead Workspace</h3>
						<p id="modal-subtitle" class="text-slate-400 text-[10px] font-medium mt-1"></p>
					</div>
					<button onclick="closeModal()" class="w-10 h-10 flex items-center justify-center bg-white/5 hover:bg-red-500/20 text-slate-400 rounded-xl transition">
						<i data-lucide="x" class="w-5 h-5"></i>
					</button>
				</div>

				<div class="flex-1 overflow-y-auto p-6">
					<div id="modal-body-content" class="space-y-6"></div>
				</div>
			</div>

            <div class="p-10 border-t bg-slate-50/50 flex justify-end gap-6">
                <button onclick="closeModal()" class="text-[10px] font-bold text-slate-400 hover:text-white transition uppercase tracking-widest">Close Workspace</button>
                <button id="save-btn" class="px-12 py-5 bg-slate-900 text-white text-[10px] font-bold rounded-2xl hover:bg-indigo-600 transition shadow-xl uppercase tracking-[0.2em]">Save All Changes</button>
            </div>
        </div>
    </div>

    <div id="client-view" class="hidden min-h-screen bg-[#020617] text-white">
		<nav class="h-20 border-b border-white/5 bg-slate-900/50 backdrop-blur-xl px-8 flex items-center justify-between sticky top-0 z-50">
			<div class="flex items-center gap-4">
				<div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20">
					<img src="https://github.com/ranadeep-banik137/NivasKunjInteriors/blob/main/logo%20transparent%20PNG.png?raw=true" class="h-6 w-auto" alt="Logo">
				</div>
				<div>
					<h1 class="font-bold text-sm tracking-tighter uppercase leading-none">Nivas Kunj</h1>
					<p class="text-[8px] font-black text-indigo-400 uppercase tracking-widest mt-1">Client Activity Portal</p>
				</div>
			</div>

			<div class="flex items-center gap-6">
				<div class="hidden md:block text-right">
					<p id="client-display-email" class="text-[10px] font-bold text-slate-400 italic"></p>
					<p class="text-[8px] font-black text-emerald-500 uppercase tracking-widest">Logged In</p>
				</div>
				<button onclick="handleLogout()" class="w-11 h-11 flex items-center justify-center rounded-2xl bg-white/5 border border-white/10 hover:bg-red-500/20 hover:text-red-500 transition-all">
					<i data-lucide="log-out" class="w-5 h-5"></i>
				</button>
			</div>
		</nav>

		<main class="max-w-6xl mx-auto px-8 py-12">
			<header class="mb-12 flex flex-col md:flex-row justify-between items-end gap-6">
				<div>
					<h2 class="text-4xl font-black tracking-tighter uppercase mb-2">Workspace Hub</h2>
					<p class="text-slate-500 text-xs font-medium uppercase tracking-widest">Manage your projects and enquiries</p>
				</div>
				
				<div class="flex bg-slate-900 border border-white/5 p-1 rounded-xl">
					<button onclick="toggleClientView('projects')" id="btn-client-projects" class="px-6 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all bg-indigo-600 text-white shadow-lg">
						Active Projects
					</button>
					<button onclick="toggleClientView('enquiries')" id="btn-client-enquiries" class="px-6 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all text-slate-500 hover:text-white">
						My Enquiries
					</button>
				</div>
			</header>

			<div id="client-activity-content" class="space-y-4"></div>
		</main>
	</div>	
	<div id="project-workspace" class="fixed inset-0 z-[60] bg-slate-950/95 backdrop-blur-xl hidden overflow-y-auto">
		<div class="max-w-7xl mx-auto min-h-screen p-6 lg:p-12">
			<div class="flex justify-between items-center mb-12">
				<button onclick="closeWorkspace()" class="group flex items-center gap-3 text-slate-500 hover:text-white transition-all">
					<div class="p-3 rounded-full border border-white/10 group-hover:border-indigo-500/50">
						<i data-lucide="arrow-left" class="w-5 h-5"></i>
					</div>
					<span class="text-[10px] font-black uppercase tracking-[0.3em]">Exit Workspace</span>
				</button>
				<div id="workspace-title-area" class="text-right">
					</div>
			</div>

			<div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
				<div class="lg:col-span-4 space-y-6">
					<div class="glass-panel p-8 rounded-[32px] border border-white/10 relative overflow-hidden">
						<div class="absolute top-0 right-0 p-8 opacity-10">
							<i data-lucide="milestone" class="w-20 h-20 text-indigo-500"></i>
						</div>
						<h3 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.3em] mb-8">Project Roadmap</h3>
						<div id="luxury-timeline" class="space-y-8 relative">
							<div class="absolute left-[15px] top-2 bottom-2 w-[2px] bg-gradient-to-b from-indigo-500 via-slate-800 to-transparent"></div>
							</div>
					</div>

					<div id="workspace-contacts" class="space-y-4"></div>
				</div>

				<div class="lg:col-span-8 space-y-6">
					<div class="glass-panel p-8 rounded-[32px] border border-white/10">
						<div class="flex justify-between items-center mb-8">
							<h3 class="text-[10px] font-black text-white uppercase tracking-[0.3em]">Project Assets</h3>
							<label class="cursor-pointer px-6 py-3 bg-white text-black rounded-full text-[9px] font-black uppercase tracking-widest hover:bg-indigo-400 hover:text-white transition-all">
								Add Files
								<input type="file" class="hidden" onchange="handleProjectUpload(this)">
							</label>
						</div>
						<div id="workspace-assets" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
					</div>

					<div class="glass-panel rounded-[32px] border border-white/10 overflow-hidden flex flex-col h-[500px]">
						<div class="p-6 border-b border-white/5 bg-white/[0.02]">
							<h3 class="text-[10px] font-black text-white uppercase tracking-[0.3em]">Live Discussion & Activity</h3>
						</div>
						<div id="workspace-chat-log" class="flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar">
							</div>
						<div class="p-4 bg-slate-900/50 border-t border-white/5">
							<div class="relative">
								<input id="workspace-msg-input" type="text" placeholder="SEND MESSAGE TO ARCHITECT..." 
									   class="w-full bg-white/5 border border-white/10 rounded-2xl py-4 px-6 text-xs text-white placeholder:text-slate-600 focus:border-indigo-500 outline-none transition-all uppercase font-bold tracking-widest">
								<button onclick="sendWorkspaceMessage()" class="absolute right-3 top-2 p-2 text-indigo-400 hover:text-white">
									<i data-lucide="send" class="w-5 h-5"></i>
								</button>
							</div>
						</div>
					</div>
					
					<div class="glass-panel rounded-[32px] border border-white/10 mt-6 p-8 flex flex-col fade-in">
						<div class="flex justify-between items-start mb-6">
							<div>
								<p class="text-[8px] font-black text-indigo-400 uppercase tracking-[0.4em] mb-1">Financial Pipeline</p>
								<h3 class="font-title font-black text-xl text-white tracking-tighter uppercase">Payment Status</h3>
							</div>
							<div id="financial-summary-labels" class="flex gap-6 hidden">
								<div class="text-right">
									<p class="text-[7px] text-slate-500 uppercase font-bold tracking-widest">Total Paid</p>
									<p id="label-total-paid" class="text-xs font-black text-green-400">₹0</p>
								</div>
								<div class="text-right">
									<p class="text-[7px] text-slate-500 uppercase font-bold tracking-widest">Amount Due</p>
									<p id="label-amount-due" class="text-xs font-black text-rose-400">₹0</p>
								</div>
							</div>
							<button id="global-record-payment-btn" 
									class="bg-indigo-600 text-white px-5 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-indigo-500 transition shadow-lg shadow-indigo-500/20 active:scale-95">
								Record Payment
							</button>
						</div>

						<div class="h-[180px] w-full mb-6">
							<canvas id="paymentChart"></canvas>
						</div>

						<div class="pt-6 border-t border-white/5">
							<div class="flex justify-between items-center mb-2">
								<span class="text-[9px] font-black text-slate-500 uppercase tracking-widest">Roadmap Completion</span>
								<span id="eta-days-count" class="text-[9px] font-black text-indigo-400">SYNCING...</span>
							</div>
							<div class="w-full bg-white/5 h-1.5 rounded-full overflow-hidden">
								<div id="project-eta-fill" class="bg-indigo-500 h-full transition-all duration-1000" style="width: 0%"></div>
							</div>
							<div class="flex justify-between mt-3 text-[10px] font-black text-white">
								<div class="text-left">
									<p class="text-[7px] text-slate-500 uppercase font-bold tracking-widest text-left">Start Date</p>
									<p id="label-start-date">--</p>
								</div>
								<div class="text-right">
									<p class="text-[7px] text-slate-500 uppercase font-bold tracking-widest text-right">Target ETA</p>
									<p id="label-eta-date">--</p>
								</div>
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>
	</div>
	<div id="payment-modal" class="fixed inset-0 bg-slate-950/80 backdrop-blur-xl z-[600] hidden flex items-center justify-center p-4">
		<div class="bg-slate-900 w-full max-w-4xl rounded-[32px] border border-white/10 shadow-2xl flex flex-col overflow-hidden animate-slide-up">
			<div class="p-6 border-b border-white/5 flex justify-between items-center bg-slate-900/50 backdrop-blur-md">
				<div>
					<h3 class="text-xl font-black text-white tracking-tighter uppercase">Payment Workspace</h3>
					<p id="modal-project-id" class="text-slate-500 text-[8px] font-black uppercase tracking-[0.2em] mt-1">Project ID: --</p>
				</div>

				<div class="flex items-center gap-3">
					<button onclick="generatePaymentPDF(activeProjectId)" 
						class="flex items-center gap-2 px-4 py-2 bg-indigo-500/10 hover:bg-indigo-500 text-indigo-400 hover:text-white border border-indigo-500/20 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all shadow-lg shadow-indigo-500/10">
						<i data-lucide="download" class="w-3.5 h-3.5"></i> 
						Export to PDF
					</button>

					<button onclick="document.getElementById('payment-modal').classList.add('hidden')" 
						class="w-10 h-10 flex items-center justify-center bg-white/5 hover:bg-rose-500/20 text-slate-400 hover:text-rose-400 rounded-xl transition-all border border-white/5">
						<i data-lucide="x" class="w-5 h-5"></i>
					</button>
				</div>
			</div>

			<div class="p-8 overflow-y-auto max-h-[70vh]">
				<div class="mb-8">
					<table class="w-full text-left">
						<thead>
							<tr class="text-[9px] font-black text-slate-500 uppercase tracking-widest border-b border-white/5">
								<th class="pb-4 px-2 text-left">SL</th>
								<th class="pb-4 text-left">Payment ID</th>
								<th class="pb-4 text-left">Request Date</th>
								<th class="pb-4 text-left">Amount</th>
								<th class="pb-4 px-2 text-left">Mode</th> 
								<th class="pb-4 px-2 text-left">Remarks</th> 
								<th class="pb-4 text-left">Status</th>
								<th class="pb-4 text-right">Action</th>
							</tr>
						</thead>
						<tbody id="payment-history-rows" class="text-[10px] text-white">
							</tbody>
					</table>
				</div>

				<div id="admin-payment-section" class="pt-8 border-t border-white/5 hidden">
					<h4 class="text-[9px] font-black text-indigo-400 uppercase tracking-[0.2em] mb-4">Request Next Payment</h4>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
						<div class="space-y-1.5">
							<label class="text-[8px] font-black text-slate-500 uppercase ml-1">Next Payment Date</label>
							<input id="new-pay-date" type="date" class="w-full px-4 py-2.5 bg-slate-950 border border-white/10 rounded-xl text-xs text-white outline-none focus:border-indigo-500 transition-all">
						</div>

						<div class="space-y-1.5">
							<label class="text-[8px] font-black text-slate-500 uppercase ml-1">Request Amount</label>
							<input id="new-pay-amt" type="number" class="w-full px-4 py-2.5 bg-slate-950 border border-white/10 rounded-xl text-xs text-white outline-none focus:border-indigo-500 transition-all">
						</div>

						<div class="space-y-1.5">
							<label class="text-[8px] font-black text-slate-500 uppercase ml-1">Mode of Payment</label>
							<select id="new-pay-mode" class="w-full px-4 py-2.5 bg-slate-950 border border-white/10 rounded-xl text-xs text-white outline-none focus:border-indigo-500">
								<option value="UPI">UPI</option>
								<option value="Net Banking">Net Banking</option>
								<option value="Cash">Cash / Cheque</option>
							</select>
						</div>

						<div class="space-y-1.5">
							<label class="text-[8px] font-black text-slate-500 uppercase ml-1">Purpose of Payment</label>
							<select id="new-pay-purpose" onchange="const el = document.getElementById('other-purpose-box'); this.value === 'Others' ? el.classList.remove('hidden') : el.classList.add('hidden')" class="w-full px-4 py-2.5 bg-slate-950 border border-white/10 rounded-xl text-xs text-white outline-none focus:border-indigo-500">
								<option value="Next installment request">Next installment request</option>
								<option value="Random request Payment">Random request Payment</option>
								<option value="Others">Others</option>
							</select>
						</div>
					</div>

					<div id="other-purpose-box" class="mt-4 hidden animate-slide-up">
						<label class="text-[8px] font-black text-indigo-400 uppercase ml-1">Specify Purpose</label>
						<input id="new-pay-purpose-custom" type="text" placeholder="Type purpose here..." class="w-full mt-1 px-4 py-2.5 bg-slate-950 border border-indigo-500/30 rounded-xl text-xs text-white outline-none">
					</div>
					<button onclick="createNewPaymentEntry()" class="mt-4 w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-indigo-500/20">
						Create Installment Request
					</button>
				</div>
			</div>
		</div>
	</div>
	<div id="offline-payment-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-slate-950/80 backdrop-blur-sm p-4">
		<div class="bg-slate-900 border border-white/10 w-full max-max-w-md rounded-3xl p-8 shadow-2xl">
			<div class="w-16 h-16 bg-indigo-500/10 rounded-2xl flex items-center justify-center mb-6 mx-auto">
				<i data-lucide="info" class="w-8 h-8 text-indigo-400"></i>
			</div>
			<h3 class="text-xl font-black text-white text-center uppercase tracking-tighter">Payment Notice</h3>
			<p class="text-slate-400 text-center text-sm mt-4 leading-relaxed">
				We are yet to tie up with <span class="text-white font-bold">RazorPay</span> for automated payments. 
				<br><br>
				As of now, all transactions must be done <span class="text-indigo-400 font-bold text-xs uppercase tracking-widest">Offline</span>. 
				Please contact the Admin if your status is not updated after making a payment.
			</p>
			<button onclick="document.getElementById('offline-payment-modal').classList.add('hidden')" 
					class="w-full mt-8 py-4 bg-white text-black rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all active:scale-95">
				Understood
			</button>
		</div>
	</div>
	
	<div id="description-step-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center bg-slate-950/90 backdrop-blur-md p-4">
		<div class="bg-slate-900 border border-white/10 w-full max-w-md rounded-3xl p-8 shadow-2xl">
			<button onclick="cancelAssetUpload()" class="absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-500 hover:bg-rose-500/10 hover:text-rose-500 transition-all">
				<i data-lucide="x" class="w-4 h-4"></i>
			</button>
			<div class="flex items-center gap-4 mb-6">
				<div class="w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center text-indigo-400">
					<i data-lucide="tag" class="w-6 h-6"></i>
				</div>
				<div>
					<h3 class="text-lg font-black text-white uppercase tracking-tight">File Details Required</h3>
					<p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">Assign a space to your upload</p>
				</div>
			</div>

			<div class="space-y-4">
				<div>
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-widest mb-2 block">1. Space Category</label>
					<select id="modal-category" onchange="updateModalSubOptions()" class="w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-indigo-500">
						<option value="">Select Category...</option>
						<option value="bedroom">Bedrooms</option>
						<option value="washroom">Washrooms & Care</option>
						<option value="lifestyle">Lifestyle & Living</option>
						<option value="kitchen">Kitchen Space</option>
						<option value="lobby">Lobby & Balcony</option>
						<option value="others">Others</option>
					</select>
				</div>

				<div>
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-widest mb-2 block">2. Specific Area</label>
					<select id="modal-sub-category" onchange="toggleModalOthers()" class="w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-indigo-500 disabled:opacity-20 disabled:cursor-not-allowed transition-all">
						<option value="">Choose Area...</option>
					</select>
				</div>

				<div id="modal-others-wrapper" class="hidden">
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-widest mb-2 block">3. Custom Name</label>
					<input type="text" id="modal-custom-desc" placeholder="e.g. Roof Garden" class="w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-indigo-500">
				</div>

				<button onclick="finalizeAssetUpload()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase text-[10px] tracking-[0.2em] py-4 rounded-xl transition-all mt-4">
					Confirm & Save File
				</button>
			</div>
		</div>
	</div>
	<div id="manual-project-modal" class="fixed inset-0 bg-slate-950/40 backdrop-blur-md z-[500] hidden flex items-center justify-center p-6">
		<div class="bg-slate-900/90 w-full max-w-sm rounded-[32px] border border-white/10 p-6 shadow-2xl overflow-hidden animate-slide-up relative ring-1 ring-white/5">
			
			<div class="flex justify-between items-start mb-6">
				<div class="flex items-center gap-3">
					<div class="w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center text-indigo-400 shadow-inner">
						<i data-lucide="layers" class="w-5 h-5"></i>
					</div>
					<div>
						<h3 class="text-sm font-black text-white uppercase tracking-tight">New Workspace</h3>
						<p class="text-[9px] text-slate-500 font-bold uppercase tracking-widest">Manual Creation</p>
					</div>
				</div>
				<button onclick="closeManualProjectModal()" class="p-1.5 rounded-lg bg-white/5 text-slate-500 hover:text-rose-400 hover:bg-rose-400/10 transition-all">
					<i data-lucide="x" class="w-4 h-4"></i>
				</button>
			</div>

			<div class="space-y-5">
				<div class="group">
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-[0.15em] mb-1.5 block ml-1 group-focus-within:text-indigo-400 transition-colors">Project Title</label>
					<input type="text" id="manual-project-name" placeholder="e.g. Skyline Residency" 
						class="w-full bg-slate-950/50 border border-white/5 rounded-xl px-4 py-3 text-xs text-white placeholder:text-slate-700 focus:outline-none focus:border-indigo-500/50 focus:ring-4 focus:ring-indigo-500/5 transition-all">
				</div>

				<div class="group">
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-[0.15em] mb-1.5 block ml-1 group-focus-within:text-indigo-400 transition-colors">Link Lead (Optional)</label>
					<div class="relative">
						<select id="manual-enquiry-link" 
							class="w-full bg-slate-950/50 border border-white/5 rounded-xl px-4 py-3 text-xs text-white appearance-none focus:outline-none focus:border-indigo-500/50 focus:ring-4 focus:ring-indigo-500/5 transition-all cursor-pointer">
							<option value="">-- No Linked Lead --</option>
						</select>
						<i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-600 pointer-events-none"></i>
					</div>
				</div>

				<div class="group">
					<label class="text-[9px] font-black text-slate-500 uppercase tracking-[0.15em] mb-1.5 block ml-1 group-focus-within:text-indigo-400 transition-colors">Client Login Email</label>
					<input type="email" id="manual-client-email" placeholder="client@example.com" 
						class="w-full bg-slate-950/50 border border-white/5 rounded-xl px-4 py-3 text-xs text-white placeholder:text-slate-700 focus:outline-none focus:border-indigo-500/50 focus:ring-4 focus:ring-indigo-500/5 transition-all">
				</div>

				<button onclick="handleManualProjectCreation()" id="manual-proj-btn" 
					class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase text-[10px] tracking-[0.25em] py-4 rounded-xl transition-all shadow-lg shadow-indigo-500/20 active:scale-[0.97] flex items-center justify-center gap-2 group">
					<span>Establish Project</span>
					<i data-lucide="arrow-right" class="w-3.5 h-3.5 group-hover:translate-x-1 transition-transform"></i>
				</button>
			</div>

			<div class="absolute -bottom-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[80px] rounded-full pointer-events-none"></div>
		</div>
	</div>
</body>
</html>
